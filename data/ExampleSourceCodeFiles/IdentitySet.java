/Users/user/eclipse.platform.ui/bundles/org.eclipse.core.databinding.observable/src/org/eclipse/core/internal/databinding/identity/IdentitySet.java
copyright matthew hall all rights reserved this program accompanying materials terms eclipse public license accompanies distribution http eclipse org legal epl html contributors matthew hall initial implementation bug matthew hall bug viewer element set java matthew hall bugs stefan xenos sxenos gmail bug org eclipse core internal databinding identity java lang reflect array java util collection java util hash set java util iterator java util set link set elements elements removed compared identity elements set compared code code link equals object this strict implementation link set intentionally violates link set contract requires link equals object comparing elements param type elements collection identity set set set identity wrapper wrapped set constructs identity set identity set wrapped set hash set constructs identity set unique instances collection param collection collection elements set identity set collection collection add all collection override add wrapped set add identity wrapper wrap override add all collection changed false element changed wrapped set add identity wrapper wrap element changed override clear wrapped set clear override object wrapped set identity wrapper wrap override all collection iterator iterator iterator iterator next wrapped set identity wrapper wrap iterator false true override empty wrapped set empty override iterator iterator iterator identity wrapper wrapped iterator wrapped set iterator iterator override next wrapped iterator next override wrapped iterator unwrap override remove wrapped iterator remove override remove object wrapped set remove identity wrapper wrap override remove all collection changed false iterator iterator iterator iterator next changed remove iterator changed override retain all collection have slow ensure correct comparisons delegate compare elements changed false object retain all array outer iterator iterator iterator iterator next element iterator retain all length element retain all outer iterator remove changed true changed override size wrapped set size override object array array object wrapped set size suppress warnings unchecked override array size wrapped set size result length size result array instance class component type size identity wrapper wrapper wrapped set result wrapper unwrap result override equals object obj obj true obj set false set set obj size size all override hash code hash iterator iterator iterator iterator next element iterator hash element null element hash code hash